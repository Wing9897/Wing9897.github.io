<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MetaMaskÊ∏¨Ë©¶Âπ≥Âè∞</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }
        
        .main-content {
            padding: 30px;
        }
        
        .grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }
        
        @media (max-width: 768px) {
            .grid {
                grid-template-columns: 1fr;
            }
        }
        
        .card {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            border: 1px solid #e9ecef;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        
        .card h3 {
            color: #495057;
            margin-bottom: 15px;
            font-size: 1.3em;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .status-card {
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
        }
        
        .network-card {
            background: linear-gradient(135deg, #f3e5f5 0%, #e1bee7 100%);
        }
        
        .faucet-card {
            background: linear-gradient(135deg, #e8f5e8 0%, #c8e6c9 100%);
        }
        
        .transaction-card {
            background: linear-gradient(135deg, #fff3e0 0%, #ffcc80 100%);
        }
        
        .info-card {
            background: linear-gradient(135deg, #f1f8e9 0%, #dcedc1 100%);
            grid-column: 1 / -1;
            margin-bottom: 30px;
        }
        
        .status-info {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .status-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid rgba(0,0,0,0.1);
        }
        
        .status-item:last-child {
            border-bottom: none;
        }
        
        .status-label {
            font-weight: 600;
            color: #495057;
        }
        
        .status-value {
            font-family: monospace;
            background: rgba(255,255,255,0.8);
            padding: 4px 8px;
            border-radius: 6px;
            font-size: 0.9em;
        }
        
        button {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            margin: 5px;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(76, 175, 80, 0.4);
        }
        
        button:disabled {
            background: #cccccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%);
        }
        
        .btn-primary:hover {
            box-shadow: 0 5px 15px rgba(33, 150, 243, 0.4);
        }
        
        .btn-secondary {
            background: linear-gradient(135deg, #9C27B0 0%, #7B1FA2 100%);
        }
        
        .btn-secondary:hover {
            box-shadow: 0 5px 15px rgba(156, 39, 176, 0.4);
        }
        
        .btn-success {
            background: linear-gradient(135deg, #4CAF50 0%, #388E3C 100%);
        }
        
        .btn-success:hover {
            box-shadow: 0 5px 15px rgba(76, 175, 80, 0.4);
        }
        
        .btn-info {
            background: linear-gradient(135deg, #FF9800 0%, #F57C00 100%);
        }
        
        .btn-info:hover {
            box-shadow: 0 5px 15px rgba(255, 152, 0, 0.4);
        }
        
        .button-group {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
        }
        
        input[type="text"] {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s ease;
            margin-bottom: 15px;
        }
        
        input[type="text"]:focus {
            outline: none;
            border-color: #4CAF50;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #495057;
        }
        
        .alert {
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid;
        }
        
        .alert-info {
            background-color: #d1ecf1;
            border-color: #bee5eb;
            color: #0c5460;
        }
        
        .alert-success {
            background-color: #d4edda;
            border-color: #c3e6cb;
            color: #155724;
        }
        
        .alert-error {
            background-color: #f8d7da;
            border-color: #f5c6cb;
            color: #721c24;
        }
        
        .link-list {
            list-style: none;
            padding: 0;
        }
        
        .link-list li {
            margin-bottom: 10px;
            padding-left: 20px;
            position: relative;
        }
        
        .link-list li:before {
            content: "üîó";
            position: absolute;
            left: 0;
        }
        
        .link-list a {
            color: #007bff;
            text-decoration: none;
            font-weight: 500;
        }
        
        .link-list a:hover {
            text-decoration: underline;
        }
        
        .usage-list {
            list-style: none;
            padding: 0;
        }
        
        .usage-list li {
            margin-bottom: 8px;
            padding-left: 25px;
            position: relative;
        }
        
        .usage-list li:before {
            content: counter(step-counter);
            counter-increment: step-counter;
            position: absolute;
            left: 0;
            background: #4CAF50;
            color: white;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
        }
        
        .usage-list {
            counter-reset: step-counter;
        }
        
        .full-width {
            grid-column: 1 / -1;
        }
        
        #messageBox {
            position: fixed;
            top: 20px;
            right: 20px;
            max-width: 400px;
            z-index: 1000;
        }

        .account-select {
            width: 75%;
            max-width: 280px;
            padding: 4px 8px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 12px;
            font-family: monospace;
            background-color: rgba(255,255,255,0.8);
            color: #333;
            cursor: pointer;
            transition: border-color 0.3s ease;
            height: 28px;
        }

        .account-select:focus {
            outline: none;
            border-color: #4CAF50;
        }

        .account-select:disabled {
            background-color: #f8f9fa;
            cursor: not-allowed;
        }

        .token-card {
            background: linear-gradient(135deg, #fef7ff 0%, #fce7ff 100%);
        }

        .qr-card {
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
        }

        .qr-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
        }

        .qr-code {
            padding: 15px;
            background: white;
            border-radius: 10px;
            border: 2px solid #e5e7eb;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .qr-address {
            font-family: monospace;
            font-size: 0.75rem;
            color: #666;
            text-align: center;
            word-break: break-all;
            max-width: 100%;
            padding: 8px;
            background: rgba(255,255,255,0.8);
            border-radius: 6px;
            border: 1px solid #e5e7eb;
        }

        .btn-token {
            background: linear-gradient(135deg, #a855f7 0%, #9333ea 100%);
        }

        .btn-token:hover {
            box-shadow: 0 5px 15px rgba(168, 85, 247, 0.4);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ü¶ä MetaMask Âä†ÂØÜË≤®Âπ£Ê∏¨Ë©¶Âπ≥Âè∞</h1>
            <p>ÂÆâÂÖ®‰æøÊç∑ÁöÑÂçÄÂ°äÈèàÊ∏¨Ë©¶‰∫§ÊòìÁí∞Â¢É</p>
        </div>
        
        <div class="main-content">
            <!-- ‰ΩøÁî®Ë™™Êòé -->
            <div class="card info-card">
                <h3>üìã ‰ΩøÁî®Ë™™Êòé</h3>
                <ol class="usage-list">
                <li>Á¢∫‰øùÂÆâË£ù‰∫Ü MetaMask ÁÄèË¶ΩÂô®Êì¥Â±ï</li>
                <li>ÈªûÊìä„ÄåÈÄ£Êé• MetaMask„ÄçÊåâÈàï</li>
                <li><strong>Êñ∞ÊâãÊé®Ëñ¶ÔºöÂÖà‰ΩøÁî®Ê∏¨Ë©¶Á∂≤Áç≤ÂèñÂÖçË≤ª‰ª£Âπ£</strong></li>
                <li>Ê∑ªÂä†Áõ∏ÊáâÁöÑÁ∂≤Áµ°ÈÖçÁΩÆ</li>
                <li>Ëº∏ÂÖ•Êé•Êî∂Âú∞ÂùÄÂíåÈáëÈ°çÔºåÂü∑Ë°åÊ∏¨Ë©¶‰∫§Êòì</li>
            </ol>
                <p style="margin-top: 15px;"><strong>üîó Êõ¥Â§ö Chain ID Ë≥áË®äÔºö</strong><a href="https://chainlist.org/" target="_blank">Chainlist.org</a> - ÂÆåÊï¥ÁöÑ EVM Á∂≤Áµ°Ê∏ÖÂñÆÔºåÂπ´Âä©ÊÇ®ÈÄ£Êé•Âà∞Ê≠£Á¢∫ÁöÑ Chain ID Âíå Network ID</p>
        </div>

            <div class="grid">
                <!-- ÈÄ£Êé•ÁãÄÊÖã -->
                <div class="card status-card">
                    <h3>üîó ÈÄ£Êé•ÁãÄÊÖã</h3>
                    <div class="status-info">
                        <div class="status-item">
                            <span class="status-label">ÈÄ£Êé•ÁãÄÊÖã</span>
                            <span class="status-value" id="connectionStatus">Êú™ÈÄ£Êé•</span>
                        </div>
                        <div class="status-item">
                            <span class="status-label">Áï∂ÂâçÂ∏≥Êà∂</span>
                            <select id="accountSelect" class="account-select" onchange="switchAccount()" disabled>
                                <option value="">Ë´ãÂÖàÈÄ£Êé•Èå¢ÂåÖ</option>
                            </select>
                        </div>
                        <div class="status-item">
                            <span class="status-label">Á∂≤Áµ°</span>
                            <span class="status-value" id="networkInfo">--</span>
                        </div>
                        <div class="status-item">
                            <span class="status-label">Chain ID</span>
                            <span class="status-value" id="chainIdInfo">--</span>
                        </div>
                        <div class="status-item">
                            <span class="status-label">È§òÈ°ç</span>
                            <span class="status-value" id="balanceInfo">--</span>
                        </div>
                    </div>
                    <div class="button-group">
                        <button id="connectBtn" class="btn-primary" onclick="connectMetaMask()">
                            üîå ÈÄ£Êé• MetaMask
                        </button>
                        <button id="refreshAccountsBtn" class="btn-secondary" onclick="refreshAccounts()" disabled>
                            üîÑ Âà∑Êñ∞Â∏≥Êà∂
                        </button>
                    </div>
        </div>

                <!-- Á∂≤Áµ°ÁÆ°ÁêÜ -->
                <div class="card network-card">
                    <h3>üåê Á∂≤Áµ°ÁÆ°ÁêÜ</h3>
                    <p style="margin-bottom: 15px; font-size: 0.9em; color: #666;">ÈÅ∏Êìá‰∏¶ÂàáÊèõÂà∞ÊÇ®ÈúÄË¶ÅÁöÑÊ∏¨Ë©¶Á∂≤Áµ°</p>
                    <div class="button-group">
                        <button id="addSepoliaBtn" class="btn-secondary" onclick="addSepoliaTestnet()" disabled>
                            ‚ö° Ê∑ªÂä†ÂèäÂàáÊèõ Ethereum Sepolia
                        </button>
                        <button id="addPolygonBtn" class="btn-secondary" onclick="addPolygonAmoyTestnet()" disabled>
                            üî∑ Ê∑ªÂä†ÂèäÂàáÊèõ Polygon Amoy
                        </button>
                        <button id="openChainlistBtn" class="btn-info" onclick="openChainlist()">
                            üîó Êü•ÁúãÊõ¥Â§öÁ∂≤Áµ°
                        </button>
                    </div>
                </div>
                
                <!-- ÂÖçË≤ª‰ª£Âπ£ -->
                <div class="card faucet-card">
                    <h3>üÜì ÂÖçË≤ªÊ∏¨Ë©¶‰ª£Âπ£</h3>
                    <p style="margin-bottom: 15px; font-size: 0.9em; color: #666;">ÂæûÂÆòÊñπÊ∞¥ÈæçÈ†≠Áç≤ÂèñÂÖçË≤ªÊ∏¨Ë©¶‰ª£Âπ£</p>
                    <ul class="link-list">
                        <li><a href="https://cloud.google.com/application/web3/faucet/ethereum/sepolia" target="_blank">Google Ethereum Sepolia Ê∞¥ÈæçÈ†≠</a></li>
                        <li><a href="https://faucet.polygon.technology/" target="_blank">Polygon ÂÆòÊñπÊ∞¥ÈæçÈ†≠</a></li>
                    </ul>
                    <div class="button-group">
                        <button id="openFaucetBtn" class="btn-success" onclick="openFaucet()" disabled>
                            üíß Âø´ÈÄüÊâìÈñãÊ∞¥ÈæçÈ†≠
                        </button>
                    </div>
        </div>

                <!-- Ê∏¨Ë©¶‰∫§Êòì -->
                <div class="card transaction-card">
                    <h3>üí∏ Ê∏¨Ë©¶‰∫§Êòì</h3>
                    <div class="form-group">
                        <label class="form-label" for="recipientAddress">Êé•Êî∂Âú∞ÂùÄ</label>
                <input type="text" id="recipientAddress" placeholder="0x..." />
            </div>
                    <div class="form-group">
                        <label class="form-label" for="amount">ÈáëÈ°ç</label>
                <input type="text" id="amount" placeholder="0.001" />
                    </div>
                    <div class="button-group">
                        <button id="sendBtn" class="btn-primary" onclick="sendTransaction()" disabled>
                            üöÄ ÁôºÈÄÅÊ∏¨Ë©¶‰∫§Êòì
                        </button>
                    </div>
                </div>

                <!-- ÊáâÁî®‰ª£Âπ£ÁÆ°ÁêÜ -->
                <div class="card token-card">
                    <h3>ü™ô ÊáâÁî®‰ª£Âπ£</h3>
                    <p style="margin-bottom: 15px; font-size: 0.9em; color: #666;">Â∞áÊáâÁî®Â±§‰ª£Âπ£Ê∑ªÂä†Âà∞ÊÇ®ÁöÑMetaMaskÈå¢ÂåÖ</p>
                    <div class="button-group">
                        <button id="addSepoliaTokenBtn" class="btn-token" onclick="addSepoliaAppToken()" disabled>
                            ‚ö° Ê∑ªÂä†ÊáâÁî®‰ª£Âπ£
                        </button>
                    </div>
                    <p style="margin-top: 10px; font-size: 0.75rem; color: #888;">
                        ‰ª£Âπ£Âú∞ÂùÄ: 0xCaC524BcA292aaade2DF8A05cC58F0a65B1B3bB9
                    </p>
                </div>

                <!-- QRÁ¢ºÈ°ØÁ§∫ -->
                <div class="card qr-card">
                    <h3>üì± Âú∞ÂùÄQRÁ¢º</h3>
                    <div class="qr-container">
                        <div id="qrCode" class="qr-code">
                            <div style="text-align: center; color: #999; padding: 20px;">
                                Ë´ãÂÖàÈÄ£Êé•MetaMask
                            </div>
                        </div>
                        <div id="qrAddress" class="qr-address">
                            Êú™ÈÄ£Êé•Èå¢ÂåÖ
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="messageBox"></div>
    <!-- QRÁ¢ºÁîüÊàêÂ∫´ -->
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>
    <script>
        // Á∂≤Áµ°ÈÖçÁΩÆ
        // Ethereum Sepolia Ê∏¨Ë©¶Á∂≤ÈÖçÁΩÆ
        const SEPOLIA_TESTNET = {
            chainId: '0xaa36a7', // 11155111 in hex
            chainName: 'Sepolia Test Network',
            nativeCurrency: {
                name: 'ETH',
                symbol: 'ETH',
                decimals: 18
            },
            rpcUrls: ['https://sepolia.infura.io'],
            blockExplorerUrls: ['https://sepolia.etherscan.io']
        };

        // Polygon Amoy Ê∏¨Ë©¶Á∂≤ÈÖçÁΩÆ
        const POLYGON_AMOY_TESTNET = {
            chainId: '0x13882', // 80002 in hex
            chainName: 'Polygon Amoy Testnet',
            nativeCurrency: {
                name: 'POL',
                symbol: 'POL',
                decimals: 18
            },
            rpcUrls: ['https://rpc-amoy.polygon.technology'],
            blockExplorerUrls: ['https://amoy.polygonscan.com']
        };

        // Sepolia ÊáâÁî®‰ª£Âπ£ÈÖçÁΩÆ
        const SEPOLIA_APP_TOKEN = {
            address: '0xCaC524BcA292aaade2DF8A05cC58F0a65B1B3bB9',
            symbol: 'PYUSD',
            decimals: 18,
            image: 'https://via.placeholder.com/32x32/a855f7/ffffff?text=PY'
        };

        // ÂÖ®Â±ÄËÆäÈáè
        let currentAccount = null;
        let allAccounts = [];
        let web3 = null;

        // Ê™¢Êü• MetaMask ÊòØÂê¶ÂÆâË£ù
        function checkMetaMaskInstallation() {
            if (typeof window.ethereum !== 'undefined') {
                console.log('MetaMask Â∑≤ÂÆâË£ùÔºÅ');
                return true;
            } else {
                showMessage('Ë´ãÂÖàÂÆâË£ù MetaMask ÁÄèË¶ΩÂô®Êì¥Â±ïÔºÅ', 'error');
                return false;
            }
        }

        // ÈÄ£Êé• MetaMask
        async function connectMetaMask() {
            if (!checkMetaMaskInstallation()) {
                return;
            }

            try {
                // Ë´ãÊ±ÇÈÄ£Êé•Â∏≥Êà∂
                const accounts = await window.ethereum.request({
                    method: 'eth_requestAccounts'
                });

                if (accounts.length > 0) {
                    allAccounts = accounts;
                    currentAccount = accounts[0];
                    updateConnectionStatus();
                    await updateAccountInfo();
                    
                    // Êõ¥Êñ∞Â∏≥Êà∂ÈÅ∏Êìá‰∏ãÊãâÊ°Ü
                    updateAccountSelect();
                    
                    // ÂïüÁî®ÊåâÈàï
                    document.getElementById('addSepoliaBtn').disabled = false;
                    document.getElementById('addPolygonBtn').disabled = false;
                    document.getElementById('openFaucetBtn').disabled = false;
                    document.getElementById('sendBtn').disabled = false;
                    document.getElementById('refreshAccountsBtn').disabled = false;
                    document.getElementById('accountSelect').disabled = false;
                    document.getElementById('addSepoliaTokenBtn').disabled = false;
                    
                    // ÁîüÊàêQRÁ¢º
                    await generateQRCode(currentAccount);
                    
                    showMessage('MetaMask ÈÄ£Êé•ÊàêÂäüÔºÅ', 'success');
                }
            } catch (error) {
                console.error('ÈÄ£Êé•Â§±Êïó:', error);
                showMessage(`ÈÄ£Êé•Â§±Êïó: ${error.message}`, 'error');
            }
        }

        // Êõ¥Êñ∞Â∏≥Êà∂ÈÅ∏Êìá‰∏ãÊãâÊ°Ü
        function updateAccountSelect() {
            const accountSelect = document.getElementById('accountSelect');
            accountSelect.innerHTML = '';
            
            if (allAccounts.length === 0) {
                accountSelect.innerHTML = '<option value="">Ë´ãÂÖàÈÄ£Êé•Èå¢ÂåÖ</option>';
                return;
            }
            
            allAccounts.forEach(account => {
                const option = document.createElement('option');
                option.value = account;
                option.textContent = `${account.slice(0, 10)}...${account.slice(-6)}`;
                if (account === currentAccount) {
                    option.selected = true;
                }
                accountSelect.appendChild(option);
            });
        }

        // Ê∑ªÂä† Sepolia Ê∏¨Ë©¶Á∂≤
        async function addSepoliaTestnet() {
            await addNetwork(SEPOLIA_TESTNET, 'Ethereum Sepolia Ê∏¨Ë©¶Á∂≤');
        }

        // Ê∑ªÂä† Polygon Amoy Ê∏¨Ë©¶Á∂≤
        async function addPolygonAmoyTestnet() {
            await addNetwork(POLYGON_AMOY_TESTNET, 'Polygon Amoy Ê∏¨Ë©¶Á∂≤');
        }

        // ÈÄöÁî®Ê∑ªÂä†Á∂≤Áµ°ÂáΩÊï∏
        async function addNetwork(networkConfig, networkName) {
            if (!checkMetaMaskInstallation()) {
                return;
            }

            try {
                // ÂòóË©¶ÂàáÊèõÂà∞ÊåáÂÆöÁ∂≤Áµ°
                await window.ethereum.request({
                    method: 'wallet_switchEthereumChain',
                    params: [{ chainId: networkConfig.chainId }],
                });
                
                showMessage(`Â∑≤ÂàáÊèõÂà∞ ${networkName}ÔºÅ`, 'success');
            } catch (switchError) {
                // Â¶ÇÊûúÁ∂≤Áµ°‰∏çÂ≠òÂú®ÔºåÊ∑ªÂä†Á∂≤Áµ°
                if (switchError.code === 4902) {
                    try {
                        await window.ethereum.request({
                            method: 'wallet_addEthereumChain',
                            params: [networkConfig],
                        });
                        showMessage(`${networkName} Ê∑ªÂä†ÊàêÂäüÔºÅ`, 'success');
                    } catch (addError) {
                        console.error('Ê∑ªÂä†Á∂≤Áµ°Â§±Êïó:', addError);
                        showMessage(`Ê∑ªÂä†Á∂≤Áµ°Â§±Êïó: ${addError.message}`, 'error');
                    }
                } else {
                    console.error('ÂàáÊèõÁ∂≤Áµ°Â§±Êïó:', switchError);
                    showMessage(`ÂàáÊèõÁ∂≤Áµ°Â§±Êïó: ${switchError.message}`, 'error');
                }
            }
            
            // Êõ¥Êñ∞Á∂≤Áµ°‰ø°ÊÅØ
            setTimeout(updateAccountInfo, 1000);
        }

        // ÊâìÈñãÊ∞¥ÈæçÈ†≠È†òÂèñÂÖçË≤ª‰ª£Âπ£
        async function openFaucet() {
            if (!currentAccount) {
                showMessage('Ë´ãÂÖàÈÄ£Êé• MetaMaskÔºÅ', 'error');
                return;
            }
            
            // Áç≤ÂèñÁï∂ÂâçÁ∂≤Áµ°
            const chainId = await window.ethereum.request({ method: 'eth_chainId' });
            let faucetUrl = 'https://cloud.google.com/application/web3/faucet/ethereum/sepolia';
            let networkName = 'Ê∞¥ÈæçÈ†≠';
            
            // Ê†πÊìöÁ∂≤Áµ°ÈÅ∏ÊìáÂ∞çÊáâÁöÑÊ∞¥ÈæçÈ†≠
            switch(chainId) {
                case '0xaa36a7': // Sepolia
                    faucetUrl = 'https://cloud.google.com/application/web3/faucet/ethereum/sepolia';
                    networkName = 'Google Ethereum Sepolia Ê∞¥ÈæçÈ†≠';
                    break;
                case '0x13882': // Polygon Amoy
                    faucetUrl = 'https://faucet.polygon.technology/';
                    networkName = 'Polygon ÂÆòÊñπÊ∞¥ÈæçÈ†≠';
                    break;
                default:
                    faucetUrl = 'https://cloud.google.com/application/web3/faucet/ethereum/sepolia';
                    networkName = 'Google Ethereum Sepolia Ê∞¥ÈæçÈ†≠';
            }
            
            // Ë§áË£ΩÂú∞ÂùÄÂà∞Ââ™Ë≤ºÊùø
            navigator.clipboard.writeText(currentAccount).then(() => {
                showMessage(`‚úÖ Â∑≤Ë§áË£Ω‰Ω†ÁöÑÈå¢ÂåÖÂú∞ÂùÄÔºö${currentAccount.slice(0, 10)}...${currentAccount.slice(-6)}\nÂç≥Â∞áÊâìÈñã ${networkName} Ê∞¥ÈæçÈ†≠Á∂≤Á´ôÔºåË≤º‰∏äÂú∞ÂùÄÂç≥ÂèØÈ†òÂèñÂÖçË≤ªÊ∏¨Ë©¶Âπ£ÔºÅ`, 'success');
                
                // ÊâìÈñãÊ∞¥ÈæçÈ†≠Á∂≤Á´ô
                setTimeout(() => {
                    window.open(faucetUrl, '_blank');
                }, 2000);
            }).catch(err => {
                console.error('Ë§áË£ΩÂ§±Êïó:', err);
                showMessage(`‰Ω†ÁöÑÈå¢ÂåÖÂú∞ÂùÄÔºö${currentAccount.slice(0, 10)}...${currentAccount.slice(-6)}\nË´ãÊâãÂãïË§áË£ΩÂà∞Ê∞¥ÈæçÈ†≠Á∂≤Á´ôÈ†òÂèñÂÖçË≤ª‰ª£Âπ£`, 'info');
                window.open(faucetUrl, '_blank');
            });
        }

        // ÊâìÈñã Chainlist Êü•ÁúãÊõ¥Â§öÁ∂≤Áµ°
        function openChainlist() {
            showMessage('Âç≥Â∞áÊâìÈñã Chainlist.org Á∂≤Á´ôÔºåÊÇ®ÂèØ‰ª•Âú®ÈÇ£Ë£°ÊâæÂà∞ÊâÄÊúâ EVM Á∂≤Áµ°ÁöÑ Chain ID Âíå RPC Ë®≠ÂÆöÔºÅ', 'info');
            
            // ÊâìÈñã Chainlist Á∂≤Á´ô
            setTimeout(() => {
                window.open('https://chainlist.org/', '_blank');
            }, 1500);
        }

        // Ê∑ªÂä†SepoliaÊáâÁî®‰ª£Âπ£
        async function addSepoliaAppToken() {
            if (!checkMetaMaskInstallation()) {
                return;
            }

            try {
                // Ê™¢Êü•ÊòØÂê¶Âú®SepoliaÁ∂≤Áµ°‰∏ä
                const chainId = await window.ethereum.request({ method: 'eth_chainId' });
                
                if (chainId !== '0xaa36a7') {
                    showMessage('Ë´ãÂÖàÂàáÊèõÂà∞Ethereum SepoliaÊ∏¨Ë©¶Á∂≤Áµ°ÔºÅ', 'error');
                    return;
                }

                // Ê∑ªÂä†‰ª£Âπ£Âà∞MetaMask
                await window.ethereum.request({
                    method: 'wallet_watchAsset',
                    params: {
                        type: 'ERC20',
                        options: {
                            address: SEPOLIA_APP_TOKEN.address,
                            symbol: SEPOLIA_APP_TOKEN.symbol,
                            decimals: SEPOLIA_APP_TOKEN.decimals,
                            image: SEPOLIA_APP_TOKEN.image,
                        },
                    },
                });

                showMessage('ÊáâÁî®‰ª£Âπ£Ê∑ªÂä†ÊàêÂäüÔºÅÊÇ®ÁèæÂú®ÂèØ‰ª•Âú®MetaMask‰∏≠ÁúãÂà∞Ê≠§‰ª£Âπ£„ÄÇ', 'success');
                
            } catch (error) {
                console.error('Ê∑ªÂä†‰ª£Âπ£Â§±Êïó:', error);
                if (error.code === 4001) {
                    showMessage('Áî®Êà∂ÊãíÁµï‰∫ÜÊ∑ªÂä†‰ª£Âπ£ÁöÑË´ãÊ±Ç', 'error');
                } else {
                    showMessage(`Ê∑ªÂä†‰ª£Âπ£Â§±Êïó: ${error.message}`, 'error');
                }
            }
        }

        // ÁîüÊàêQRÁ¢º
        async function generateQRCode(address) {
            if (!address) {
                const qrCodeElement = document.getElementById('qrCode');
                qrCodeElement.innerHTML = '<div style="text-align: center; color: #999; padding: 20px;">Ë´ãÂÖàÈÄ£Êé•MetaMask</div>';
                document.getElementById('qrAddress').textContent = 'Êú™ÈÄ£Êé•Èå¢ÂåÖ';
                return;
            }

            try {
                const qrCodeElement = document.getElementById('qrCode');
                const qrAddressElement = document.getElementById('qrAddress');
                
                // Ê∏ÖÁ©∫‰πãÂâçÁöÑÂÖßÂÆπ
                qrCodeElement.innerHTML = '';
                
                // Ê™¢Êü•QRÁ¢ºÂ∫´ÊòØÂê¶Â∑≤ËºâÂÖ•
                if (typeof QRCode === 'undefined') {
                    console.warn('QRÁ¢ºÂ∫´Â∞öÊú™ËºâÂÖ•Ôºå‰ΩøÁî®ÂÇôÁî®ÊñπÊ°à');
                    // ÂÇôÁî®ÊñπÊ°àÔºöÈ°ØÁ§∫Âú∞ÂùÄÊñáÂ≠ó
                    qrCodeElement.innerHTML = `
                        <div style="text-align: center; padding: 20px;">
                            <div style="font-size: 2rem; margin-bottom: 10px;">üì±</div>
                            <div style="font-size: 0.8rem; color: #666;">QRÁ¢ºÂ∫´ËºâÂÖ•‰∏≠...</div>
                            <div style="font-size: 0.7rem; color: #999; margin-top: 10px;">Ë´ãÁ®çÂæåÈáçË©¶</div>
                        </div>
                    `;
                    qrAddressElement.textContent = address;
                    return;
                }
                
                // ÁîüÊàêQRÁ¢º
                const canvas = document.createElement('canvas');
                await QRCode.toCanvas(canvas, address, {
                    width: 150,
                    height: 150,
                    margin: 2,
                    color: {
                        dark: '#000000',
                        light: '#FFFFFF'
                    }
                });
                
                qrCodeElement.appendChild(canvas);
                qrAddressElement.textContent = address;
                
            } catch (error) {
                console.error('ÁîüÊàêQRÁ¢ºÂ§±Êïó:', error);
                const qrCodeElement = document.getElementById('qrCode');
                qrCodeElement.innerHTML = `
                    <div style="text-align: center; padding: 20px;">
                        <div style="font-size: 2rem; margin-bottom: 10px;">‚ùå</div>
                        <div style="font-size: 0.8rem; color: #f56565;">QRÁ¢ºÁîüÊàêÂ§±Êïó</div>
                        <div style="font-size: 0.7rem; color: #999; margin-top: 10px;">Ë´ãÊ™¢Êü•Á∂≤Áµ°ÈÄ£Êé•</div>
                    </div>
                `;
            }
        }

        // ÁôºÈÄÅÊ∏¨Ë©¶‰∫§Êòì
        async function sendTransaction() {
            const recipientAddress = document.getElementById('recipientAddress').value;
            const amount = document.getElementById('amount').value;

            // È©óË≠âËº∏ÂÖ•
            if (!recipientAddress || !amount) {
                showMessage('Ë´ãÂ°´ÂØ´Êé•Êî∂Âú∞ÂùÄÂíåÈáëÈ°çÔºÅ', 'error');
                return;
            }

            if (!recipientAddress.match(/^0x[a-fA-F0-9]{40}$/)) {
                showMessage('Êé•Êî∂Âú∞ÂùÄÊ†ºÂºè‰∏çÊ≠£Á¢∫ÔºÅ', 'error');
                return;
            }

            if (isNaN(amount) || parseFloat(amount) <= 0) {
                showMessage('ÈáëÈ°çÂøÖÈ†àÊòØÊ≠£Êï∏ÔºÅ', 'error');
                return;
            }

            try {
                // ËΩâÊèõÈáëÈ°çÁÇ∫ Wei (1 ETH/POL = 10^18 Wei)
                const amountInWei = (parseFloat(amount) * Math.pow(10, 18)).toString(16);

                // ÊßãÂª∫‰∫§ÊòìÂèÉÊï∏
                const transactionParameters = {
                    to: recipientAddress,
                    from: currentAccount,
                    value: '0x' + amountInWei,
                    gas: '0x5208', // 21000 gas (Ê®ôÊ∫ñËΩâÂ∏≥)
                };

                // ÁôºÈÄÅ‰∫§Êòì
                const txHash = await window.ethereum.request({
                    method: 'eth_sendTransaction',
                    params: [transactionParameters],
                });

                const chainId = await window.ethereum.request({ method: 'eth_chainId' });
                const explorerUrl = getExplorerUrl(chainId);
                
                showMessage(`‰∫§ÊòìÂ∑≤ÁôºÈÄÅÔºÅ\n‰∫§ÊòìÂìàÂ∏å: ${txHash}\nÂèØÂú® ${explorerUrl} Êü•Áúã‰∫§ÊòìÁãÄÊÖã„ÄÇ`, 'success');
                
                // Êõ¥Êñ∞È§òÈ°ç
                setTimeout(updateAccountInfo, 3000);
                
            } catch (error) {
                console.error('‰∫§ÊòìÂ§±Êïó:', error);
                showMessage(`‰∫§ÊòìÂ§±Êïó: ${error.message}`, 'error');
            }
        }

        // Êõ¥Êñ∞ÈÄ£Êé•ÁãÄÊÖã
        function updateConnectionStatus() {
            const statusElement = document.getElementById('connectionStatus');
            if (currentAccount) {
                statusElement.textContent = '‚úÖ Â∑≤ÈÄ£Êé•';
                statusElement.style.color = 'green';
            } else {
                statusElement.textContent = '‚ùå Êú™ÈÄ£Êé•';
                statusElement.style.color = 'red';
            }
        }

        // Êõ¥Êñ∞Â∏≥Êà∂‰ø°ÊÅØ
        async function updateAccountInfo() {
            if (!currentAccount) return;

            try {
                // Áç≤ÂèñÁï∂ÂâçÁ∂≤Áµ°
                const chainId = await window.ethereum.request({ method: 'eth_chainId' });
                const networkName = getNetworkName(chainId);
                document.getElementById('networkInfo').textContent = `${networkName}`;
                
                // È°ØÁ§∫Chain IDÔºàÂçÅÂÖ≠ÈÄ≤Âà∂ÂíåÂçÅÈÄ≤Âà∂Ôºâ
                const chainIdDecimal = parseInt(chainId, 16);
                document.getElementById('chainIdInfo').textContent = `${chainIdDecimal} (${chainId})`;

                // Áç≤ÂèñÈ§òÈ°ç
                const balance = await window.ethereum.request({
                    method: 'eth_getBalance',
                    params: [currentAccount, 'latest']
                });
                
                const balanceInEther = parseInt(balance, 16) / Math.pow(10, 18);
                document.getElementById('balanceInfo').textContent = 
                    `${balanceInEther.toFixed(6)} ${getNetworkCurrency(chainId)}`;

                // Êõ¥Êñ∞QRÁ¢º
                await generateQRCode(currentAccount);

            } catch (error) {
                console.error('Áç≤ÂèñÂ∏≥Êà∂‰ø°ÊÅØÂ§±Êïó:', error);
            }
        }

        // Áç≤ÂèñÁ∂≤Áµ°ÂêçÁ®±
        function getNetworkName(chainId) {
            const networks = {
                '0x1': 'Ethereum ‰∏ªÁ∂≤',
                '0xaa36a7': 'Ethereum Sepolia Ê∏¨Ë©¶Á∂≤',
                '0x13882': 'Polygon Amoy Ê∏¨Ë©¶Á∂≤'
            };
            return networks[chainId] || `Êú™Áü•Á∂≤Áµ° (${chainId})`;
        }

        // Áç≤ÂèñÁ∂≤Áµ°Ë≤®Âπ£
        function getNetworkCurrency(chainId) {
            const currencies = {
                '0x1': 'ETH',
                '0xaa36a7': 'ETH',
                '0x13882': 'POL'
            };
            return currencies[chainId] || 'ETH';
        }

        // Áç≤ÂèñÂçÄÂ°äÁÄèË¶ΩÂô®URL
        function getExplorerUrl(chainId) {
            const explorers = {
                '0x1': 'Etherscan',
                '0xaa36a7': 'Sepolia Etherscan',
                '0x13882': 'Amoy Polygonscan'
            };
            return explorers[chainId] || 'ÂçÄÂ°äÁÄèË¶ΩÂô®';
        }

        // È°ØÁ§∫Ê∂àÊÅØ
        function showMessage(message, type = 'info') {
            const messageBox = document.getElementById('messageBox');
            
            // Ê†πÊìöÈ°ûÂûãË®≠ÁΩÆÂ∞çÊáâÁöÑCSSÈ°û
            let alertClass = 'alert-info';
            switch(type) {
                case 'success':
                    alertClass = 'alert-success';
                    break;
                case 'error':
                    alertClass = 'alert-error';
                    break;
                case 'info':
                default:
                    alertClass = 'alert-info';
                    break;
            }
            
            messageBox.innerHTML = `<div class="alert ${alertClass}">${message.replace(/\n/g, '<br>')}</div>`;
            
            // Ëá™ÂãïÊ∏ÖÈô§Ê∂àÊÅØ
            setTimeout(() => {
                messageBox.innerHTML = '';
            }, 8000);
        }

        // Áõ£ËÅΩÂ∏≥Êà∂ËÆäÊõ¥
        if (typeof window.ethereum !== 'undefined') {
            window.ethereum.on('accountsChanged', function (accounts) {
                if (accounts.length === 0) {
                    // Ê≤íÊúâÂ∏≥Êà∂ÔºåÊ∏ÖÁ©∫ÊâÄÊúâÁãÄÊÖã
                    allAccounts = [];
                    currentAccount = null;
                    updateConnectionStatus();
                    document.getElementById('networkInfo').textContent = '--';
                    document.getElementById('chainIdInfo').textContent = '--';
                    document.getElementById('balanceInfo').textContent = '--';
                    document.getElementById('accountSelect').innerHTML = '<option value="">Ë´ãÂÖàÈÄ£Êé•Èå¢ÂåÖ</option>';
                    document.getElementById('accountSelect').disabled = true;
                    
                    // Á¶ÅÁî®ÊåâÈàï
                    document.getElementById('addSepoliaBtn').disabled = true;
                    document.getElementById('addPolygonBtn').disabled = true;
                    document.getElementById('openFaucetBtn').disabled = true;
                    document.getElementById('sendBtn').disabled = true;
                    document.getElementById('refreshAccountsBtn').disabled = true;
                    document.getElementById('addSepoliaTokenBtn').disabled = true;
                    
                    // Ê∏ÖÁ©∫QRÁ¢º
                    generateQRCode(null).catch(console.error);
                    
                    showMessage('MetaMask Â∑≤Êñ∑ÈñãÈÄ£Êé•', 'error');
                } else {
                    // ÊúâÂ∏≥Êà∂ÔºåÊõ¥Êñ∞Â∏≥Êà∂ÂàóË°®
                    allAccounts = accounts;
                    
                    // Â¶ÇÊûúÁï∂ÂâçÂ∏≥Êà∂‰∏çÂú®Êñ∞ÂàóË°®‰∏≠ÔºåÈÅ∏ÊìáÁ¨¨‰∏ÄÂÄãÂ∏≥Êà∂
                    if (!accounts.includes(currentAccount)) {
                        currentAccount = accounts[0];
                    }
                    
                    // Êõ¥Êñ∞ÁïåÈù¢
                    updateConnectionStatus();
                    updateAccountInfo();
                    updateAccountSelect();
                    
                    // ÂïüÁî®ÊåâÈàï
                    document.getElementById('addSepoliaBtn').disabled = false;
                    document.getElementById('addPolygonBtn').disabled = false;
                    document.getElementById('openFaucetBtn').disabled = false;
                    document.getElementById('sendBtn').disabled = false;
                    document.getElementById('refreshAccountsBtn').disabled = false;
                    document.getElementById('accountSelect').disabled = false;
                    document.getElementById('addSepoliaTokenBtn').disabled = false;
                    
                    showMessage('Â∏≥Êà∂Â∑≤Êõ¥Êñ∞', 'info');
                }
            });

            // Áõ£ËÅΩÁ∂≤Áµ°ËÆäÊõ¥
            window.ethereum.on('chainChanged', function (chainId) {
                updateAccountInfo();
                showMessage(`Â∑≤ÂàáÊèõÂà∞ ${getNetworkName(chainId)} Á∂≤Áµ°`, 'info');
            });
        }

        // ÂàáÊèõÂ∏≥Êà∂
        async function switchAccount() {
            const selectedAccount = document.getElementById('accountSelect').value;
            
            if (!selectedAccount || selectedAccount === '') {
                showMessage('Ë´ãÈÅ∏Êìá‰∏ÄÂÄãÂ∏≥Êà∂ÔºÅ', 'error');
                return;
            }

            if (selectedAccount === currentAccount) {
                showMessage('ÊÇ®Â∑≤Á∂ìÂú®‰ΩøÁî®Ê≠§Â∏≥Êà∂ÔºÅ', 'info');
                return;
            }

            try {
                // Êõ¥Êñ∞Áï∂ÂâçÂ∏≥Êà∂
                currentAccount = selectedAccount;
                
                // Êõ¥Êñ∞ÁïåÈù¢È°ØÁ§∫
                updateConnectionStatus();
                await updateAccountInfo();
                
                showMessage(`Â∑≤ÂàáÊèõÂà∞Â∏≥Êà∂Ôºö${selectedAccount.slice(0, 10)}...${selectedAccount.slice(-6)}`, 'success');
            } catch (error) {
                console.error('ÂàáÊèõÂ∏≥Êà∂Â§±Êïó:', error);
                showMessage(`ÂàáÊèõÂ∏≥Êà∂Â§±Êïó: ${error.message}`, 'error');
            }
        }

        // Âà∑Êñ∞Â∏≥Êà∂ÂàóË°®
        async function refreshAccounts() {
            if (!checkMetaMaskInstallation()) {
                return;
            }
            
            try {
                const accounts = await window.ethereum.request({ method: 'eth_accounts' });
                
                if (accounts.length > 0) {
                    allAccounts = accounts;
                    
                    // Â¶ÇÊûúÁï∂ÂâçÂ∏≥Êà∂‰∏çÂú®Êñ∞ÁöÑÂ∏≥Êà∂ÂàóË°®‰∏≠ÔºåÈÅ∏ÊìáÁ¨¨‰∏ÄÂÄãÂ∏≥Êà∂
                    if (!accounts.includes(currentAccount)) {
                        currentAccount = accounts[0];
                    }
                    
                    // Êõ¥Êñ∞Â∏≥Êà∂ÈÅ∏Êìá‰∏ãÊãâÊ°Ü
                    updateAccountSelect();
                    
                    // Êõ¥Êñ∞ÁïåÈù¢È°ØÁ§∫
                    updateConnectionStatus();
                    await updateAccountInfo();
                    
                    // ÂïüÁî®Áõ∏ÈóúÊåâÈàï
                    document.getElementById('addSepoliaBtn').disabled = false;
                    document.getElementById('addPolygonBtn').disabled = false;
                    document.getElementById('openFaucetBtn').disabled = false;
                    document.getElementById('sendBtn').disabled = false;
                    document.getElementById('refreshAccountsBtn').disabled = false;
                    document.getElementById('accountSelect').disabled = false;
                    document.getElementById('addSepoliaTokenBtn').disabled = false;
                    
                    showMessage(`Â∑≤Âà∑Êñ∞Â∏≥Êà∂ÂàóË°®ÔºåÂÖ±ÊâæÂà∞ ${accounts.length} ÂÄãÂ∏≥Êà∂`, 'success');
                } else {
                    // Ê≤íÊúâÂ∏≥Êà∂ÔºåÊ∏ÖÁ©∫ÁãÄÊÖã
                    allAccounts = [];
                    currentAccount = null;
                    updateConnectionStatus();
                    document.getElementById('networkInfo').textContent = '--';
                    document.getElementById('chainIdInfo').textContent = '--';
                    document.getElementById('balanceInfo').textContent = '--';
                    document.getElementById('accountSelect').innerHTML = '<option value="">Ë´ãÂÖàÈÄ£Êé•Èå¢ÂåÖ</option>';
                    document.getElementById('accountSelect').disabled = true;
                    
                    showMessage('Êú™ÊâæÂà∞Â∑≤ÈÄ£Êé•ÁöÑÂ∏≥Êà∂ÔºåË´ãÈáçÊñ∞ÈÄ£Êé•MetaMask', 'error');
                }
            } catch (error) {
                console.error('Âà∑Êñ∞Â∏≥Êà∂Â§±Êïó:', error);
                showMessage(`Âà∑Êñ∞Â∏≥Êà∂Â§±Êïó: ${error.message}`, 'error');
            }
        }

        // È†ÅÈù¢ËºâÂÖ•ÂÆåÊàêÂæåÂü∑Ë°å
        window.addEventListener('load', async () => {
            // Ê™¢Êü•QRÁ¢ºÂ∫´ÊòØÂê¶ËºâÂÖ•
            setTimeout(() => {
                if (typeof QRCode !== 'undefined') {
                    console.log('QRÁ¢ºÂ∫´ËºâÂÖ•ÊàêÂäü');
                } else {
                    console.warn('QRÁ¢ºÂ∫´ËºâÂÖ•Â§±ÊïóÔºåÂ∞á‰ΩøÁî®ÂÇôÁî®ÊñπÊ°à');
                }
            }, 2000);
            
            // Ê™¢Êü•ÊòØÂê¶Â∑≤ÈÄ£Êé•
            if (typeof window.ethereum !== 'undefined') {
                try {
                    const accounts = await window.ethereum.request({ method: 'eth_accounts' });
                    if (accounts.length > 0) {
                        allAccounts = accounts; // ÂàùÂßãÂåñ allAccounts
                        currentAccount = accounts[0];
                        updateConnectionStatus();
                        await updateAccountInfo();
                        
                        // Êõ¥Êñ∞Â∏≥Êà∂ÈÅ∏Êìá‰∏ãÊãâÊ°Ü
                        updateAccountSelect();
                        
                        // ÁîüÊàêQRÁ¢º
                        await generateQRCode(currentAccount);
                        
                        // ÂïüÁî®ÊåâÈàï
                        document.getElementById('addSepoliaBtn').disabled = false;
                        document.getElementById('addPolygonBtn').disabled = false;
                        document.getElementById('openFaucetBtn').disabled = false;
                        document.getElementById('sendBtn').disabled = false;
                        document.getElementById('refreshAccountsBtn').disabled = false; // ÂïüÁî®Âà∑Êñ∞ÊåâÈàï
                        document.getElementById('accountSelect').disabled = false; // ÂïüÁî®ÈÅ∏ÊìáÊ°Ü
                        document.getElementById('addSepoliaTokenBtn').disabled = false; // ÂïüÁî®‰ª£Âπ£ÊåâÈàï
                    } else {
                        // Á¢∫‰øùÊú™ÈÄ£Êé•ÊôÇÈ°ØÁ§∫È†êË®≠ÂÄº
                        document.getElementById('networkInfo').textContent = '--';
                        document.getElementById('chainIdInfo').textContent = '--';
                        document.getElementById('balanceInfo').textContent = '--';
                        document.getElementById('accountSelect').innerHTML = '<option value="">Ë´ãÂÖàÈÄ£Êé•Èå¢ÂåÖ</option>'; // Ê∏ÖÁ©∫ÈÅ∏ÊìáÊ°Ü
                        document.getElementById('accountSelect').disabled = true; // Á¶ÅÁî®ÈÅ∏ÊìáÊ°Ü
                        document.getElementById('refreshAccountsBtn').disabled = true; // Á¶ÅÁî®Âà∑Êñ∞ÊåâÈàï
                    }
                } catch (error) {
                    console.error('Ê™¢Êü•ÈÄ£Êé•ÁãÄÊÖãÂ§±Êïó:', error);
                }
            }
        });
    </script>
</body>
</html> 